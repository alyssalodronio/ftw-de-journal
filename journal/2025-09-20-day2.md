# Day 2: More SQL, Joins, & Data Modeling

## High-Level Concepts

### 3-Stage Data Pipeline
A common workflow for moving and preparing data:
1.  **Extract**: Pulling data from a source system.
2.  **Load**: Placing the raw data into a target system (like a data warehouse).
3.  **Transform**: Cleaning, modeling, and preparing the data for analysis.

### Testing Data Pipelines
* **Unit Test**: Testing an individual component of the pipeline on your **local machine**.
* **System Test**: Testing the end-to-end pipeline on the **server** or production environment.

### `CREATE TABLE` vs. `VIEW`
* `CREATE TABLE`: Creates a new, physical table that stores data.
* `VIEW`: Creates a virtual table based on the result of a `SELECT` query. It's a saved query that you can interact with like a table, but it doesn't store data itself.

---

## Data Modeling & Schema Design

### Key Terminology
* **Relational Model**: A model that defines relationships *between* tables, so you know where to pull related data from.
* **Primary Key**: A column with a unique value for each record (e.g., `user_id`). This is the unique marker.
* **Foreign Key**: A key from one table that is used to link to the Primary Key of another table.
* **Schema**: The blueprint or structure of a database, which models the data of a business or organization.

### Business Perspective: The Entity-Relationship Model (ERM)
* Starts with the business question: "How do I model my business operations?"
* Defines the key entities (e.g., Customers, Products, Orders) and the relationships between them.

### Database Normalization
* The process of structuring a relational database to reduce data redundancy and improve data integrity.
* Key stages include:
    * **1NF** (First Normal Form)
    * **2NF** (Second Normal Form)
    * **3NF / BCNF** (Third Normal Form / Boyce-Codd Normal Form)

### Dimensional Modeling
* A design approach used to build data warehouses, optimizing for fast data retrieval and analysis.

---

## Tools & Resources

* **DBeaver**: A universal database client that lets you connect to various databases and see the flow of data.
* **Chinook Database**: A popular sample database, often seen as a modern version of the `Northwind` database.
    * **Repository**: [https://github.com/lerocha/chinook-database](https://github.com/lerocha/chinook-database)
* **ClickHouse**: A fast, column-oriented database for online analytical processing (OLAP).
    * *Your Connection Name*: `remote`

---

## Practical Steps & Code Snippets

### Example SQL: Top 10 Composers by Revenue
This query joins `invoice_line` and `track` tables to find which composers have generated the most revenue.

```sql
SELECT
    t.composer,
    SUM(il.unit_price * il.quantity) AS revenue
FROM
    invoice_line AS il
LEFT JOIN
    track AS t ON il.track_id = t.track_id
WHERE
    t.composer IS NOT NULL
GROUP BY
    t.composer
ORDER BY
    revenue DESC
LIMIT 10;
